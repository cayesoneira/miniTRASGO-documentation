
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cayesoneira.github.io/miniTRASGO/software/">
      
      
        <link rel="prev" href="../hardware/">
      
      
        <link rel="next" href="../control/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Software - miniTRASGO</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#operating-the-minitrasgo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="miniTRASGO" class="md-header__button md-logo" aria-label="miniTRASGO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            miniTRASGO
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Software
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../hardware/" class="md-tabs__link">
      Hardware and design
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Software
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../control/" class="md-tabs__link">
      Control
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../about/" class="md-tabs__link">
      About
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../todo/" class="md-tabs__link">
      To do
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../troubleshooting/" class="md-tabs__link">
      Troubleshooting
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../variables/" class="md-tabs__link">
      Variables and diagrams
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="miniTRASGO" class="md-nav__button md-logo" aria-label="miniTRASGO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    miniTRASGO
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        Hardware and design
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Software
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#operating-the-minitrasgo" class="md-nav__link">
    Operating the miniTRASGO:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-0" class="md-nav__link">
    Session 0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-1" class="md-nav__link">
    Session 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#measuring-101" class="md-nav__link">
    Measuring 101:
  </a>
  
    <nav class="md-nav" aria-label="Measuring 101:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-voltage-control" class="md-nav__link">
    High Voltage control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-daq" class="md-nav__link">
    Starting the DAQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startig-a-run" class="md-nav__link">
    Startig a Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-content-of-the-computer" class="md-nav__link">
    The content of the computer
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../control/" class="md-nav__link">
        Control
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../todo/" class="md-nav__link">
        To do
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../variables/" class="md-nav__link">
        Variables and diagrams
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#operating-the-minitrasgo" class="md-nav__link">
    Operating the miniTRASGO:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-0" class="md-nav__link">
    Session 0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-1" class="md-nav__link">
    Session 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#measuring-101" class="md-nav__link">
    Measuring 101:
  </a>
  
    <nav class="md-nav" aria-label="Measuring 101:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-voltage-control" class="md-nav__link">
    High Voltage control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-daq" class="md-nav__link">
    Starting the DAQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startig-a-run" class="md-nav__link">
    Startig a Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-content-of-the-computer" class="md-nav__link">
    The content of the computer
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Software</h1>

<h2 id="operating-the-minitrasgo">Operating the miniTRASGO:</h2>
<p>Connecting to the miniTRASGO PC is mandatory to execute some key operations such as starting the voltage, the DAQ (Data Adquisition System), etc. To do so, while in the same network, a ssh connection can be establisehd from the terminal:</p>
<pre><code>ssh -X rpcuser@192.168.3.216
</code></pre>
<p>It will ask for a password, which is currently private (ask us) because it is the same for many devices at LIP Coimbra. Once we write it we will be inside the miniTRASGO computer. To leave the ssh connection just write <code>exit</code>.</p>
<p>The TRASGO team decided to build a <code>tmux</code> multiplexer to develop a series of operations in a multiple, permanently open shell. Everything could be done through the main terminal session, but one at a time, and our computer has to be connected. This way we separate visually diffetent executions, as well as we can execute in the background the measuring operations. Any activity on the multiplexer will be shown in real time to every user conncected to a <code>tmux</code> session. We can access it through the terminal inside the miniTRASGO computer. First we see the <code>tmux</code> sessions avaliable:</p>
<pre><code>tmux ls
</code></pre>
<p>It will give as output:
- <code>0: 7 windows (created Tue Jul 11 15:06:22 2023) (attached)</code>: utilized for measurement operations.
- <code>1: 13 windows (created Tue Jul 11 15:06:22 2023) (attached)</code>: utilized for data treatment.
- <code>webserver: 1 windows (created Tue Jul 11 15:12:07 2023)</code>: gives info on the trigger activity; not interactive.</p>
<p>So the line to enter any session is:</p>
<pre><code>tmux attach -t &lt;session name: 0, 1 or webserver&gt;
</code></pre>
<p>To leave the <code>tmux</code> session just press <code>CTRL + B, D</code>. Let's see what is inside these sessions and how to operate with it.</p>
<hr />
<h2 id="session-0">Session 0</h2>
<ul>
<li>0:Main01</li>
<li>1:DAQControl</li>
<li>2:DABC (why this name???)</li>
<li>3:Thresholds</li>
<li>4:HLDs</li>
<li>5:Control</li>
<li>6:Var</li>
</ul>
<h2 id="session-1">Session 1</h2>
<ul>
<li>0:Main01</li>
<li>1:Dcs</li>
<li>2:CopyFiles</li>
<li>3:Unpacker01</li>
<li>4:Unpacker02</li>
<li>5:Unpacker03</li>
<li>6:Ana</li>
<li>7:Report</li>
<li>8:Control</li>
<li>9:LogCritical</li>
<li>10:LogNet</li>
<li>11:LogSystem</li>
<li>12:Var</li>
</ul>
<hr />
<h2 id="measuring-101">Measuring 101:</h2>
<p>In <code>tmux attach -t 0</code>:</p>
<h3 id="high-voltage-control">High Voltage control</h3>
<p>In the ??? window, <code>cd ~/bin/HV</code> and execute the executable <code>hv</code> with the following arguments:</p>
<ul>
<li><code>-b &lt;bus&gt;</code> : Bus number</li>
<li><code>-I &lt;Ilim&gt;</code> : Current limiter (μA)</li>
<li><code>-V &lt;Vset&gt;</code>: High voltage value (kV)</li>
<li><code>-on</code> : Turn HV ON</li>
<li><code>-off</code> : Turn HV OFF</li>
</ul>
<p>Examples:</p>
<pre><code>./hv -b 0 -I 1 -V 5.5 -on
</code></pre>
<!-- tsk -->
<pre><code>./hv -b 0 -off
</code></pre>
<h3 id="starting-the-daq">Starting the DAQ</h3>
<p>In the 1.DAQControl window, we go to ~/trbsoft/userscripts/trb$ and execute <code>./startDAQ</code></p>
<h3 id="startig-a-run">Startig a Run</h3>
<p>In the 2.DABC window, we go to ~/trbsoft/userscripts/trb$ and execute <code>./startRun.sh</code>  </p>
<hr />
<h2 id="the-content-of-the-computer">The content of the computer</h2>
<p>/
- bin  boot  dev  etc  mnt  opt  proc  resize.log  root  run  sbin  snap  srv  sys  tmp  usr  var lib  lost+found
- /media
    - /externalDisk
        - /hlds: here the trigger data files are stored.
- /home: everything interesting is inside this directory but the trigger data files.
    - /rpcuser
        - /bin
            - /HV
                - hv: used to ramp up the High Voltage.
            - /flowmeter
                - GetData
                - GetFlow
        - /gate
            - /system
                - /devices: includes all the data coming from every component of the mingo system.
        - /hlds (empty???)
        - /linux
        - /logs: includes all the info taken by the high voltage and <em>climate</em> sensors. <strong>What is that rates_ file??</strong>. All the current data is here.
            -/done: all the full log files will be put here. <strong>Is this info then stores in the /gate/system/devices???</strong>.
        - /mnt: EMPTY
        - /perl5: ???
        - /pythonscripts: only has one .py and I do not think it is very important.
        - /trbsoft: Trigger and Readout Board software</p>
<p><code>CTRL + C</code> to stop the DAQ process.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>